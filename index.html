<!DOCTYPE html>
<html ng-app="DemoApp">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AngularJS UI Notifications</title>
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
    <!--<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>-->
    <script type="text/javascript" src="//code.jquery.com/jquery-2.1.1.min.js"></script>
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.17/angular.min.js"></script>
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.17/angular-sanitize.min.js"></script>
    <!-- Alerts -->
    <link href="src/alerts/alerts.css" rel="stylesheet" />
    <script src="src/alerts/alerts.js"></script>
    <!-- Message Box -->
    <link href="src/message-box/message-box.css" rel="stylesheet" />
    <script src="src/message-box/message-box.js"></script>
    <!-- Notifications -->
    <link href="src/notifications/notifications.css" rel="stylesheet" />
    <script src="src/notifications/notifications.js"></script>
    <!-- Shared Resources -->
    <link href="src/shared/animations.css" rel="stylesheet" />
    <!-- Demo App -->
    <script type="text/javascript">
        (function (angular)
        {
            'use strict';

            // Create sub-modules
            angular.module('DemoApp.controllers', []);
            angular.module('DemoApp.services', []);

            // Create the DemoApp module
            angular.module('DemoApp', [
                'ngSanitize',
                'whWidgets.alerts', 'whWidgets.message-box', 'whWidgets.notifications',
                'DemoApp.controllers', 'DemoApp.services'
            ]);

            var controllers = angular.module('DemoApp.controllers', []);
            controllers.controller('MainCtrl', [
                '$scope', '$log', 'InterfaceService',
                function ($scope, $log, InterfaceService)
                {
                    $scope.timeout = 0;

                    var title = 'Lorem ipsum dolor sit amet',
                        content = 'Nam at bibendum augue, ac tincidunt sem. Aenean et tortor ac quam tempus blandit. Pellentesque iaculis lacus quis sem consequat, at dapibus nibh tempor.',
                        typeIndex = -1,
                        type = ['success', 'info', 'warning', 'danger'];

                    $scope.showAlert = function ()
                    {
                        if (++typeIndex > 3) typeIndex = -1;

                        InterfaceService.showAlert({
                            title: title,
                            content: content,
                            type: type[typeIndex],
                            icon: getRandomIcon(),
                            smallIcon: getRandomIcon(),
                            timeout: $scope.timeout,
                            onClose: function (alert)
                            {
                                $log.debug('Alert.onClose: %s [%s]', alert.title, alert.type);
                            }
                        });
                    };

                    $scope.showMessageBox = function ()
                    {
                        InterfaceService.showMessageBox({
                            title: title,
                            content: content,
                            buttons: [
                                {
                                    label: 'Yes',
                                    title: 'Yes, sir!',
                                    onClick: function (messageBox, button)
                                    {
                                        $log.debug('MessageBox.onClick: %s [%s]', messageBox.title, button.label);
                                    }
                                },
                                {
                                    label: 'No',
                                    title: 'No, sir!',
                                    onClick: function (messageBox, button)
                                    {
                                        $log.debug('MessageBox.onClick: %s [%s]', messageBox.title, button.label);
                                    }
                                }
                            ],
                            onClose: function (messageBox, button)
                            {
                                $log.debug('MessageBox.onClose: %s [%s]', messageBox.title, (button ? button.label : 'N/A'));
                            }
                        });
                    };

                    $scope.showNotification = function ()
                    {
                        if (++typeIndex > 3) typeIndex = -1;

                        InterfaceService.showNotification({
                            title: title,
                            content: content,
                            type: type[typeIndex],
                            icon: getRandomIcon(false),
                            timeout: $scope.timeout,
                            onActive: function (notification)
                            {
                                $log.debug('Notification.onActive(): %s [%s]', notification.title, notification.type);
                            },
                            onClose: function (notification)
                            {
                                $log.debug('Notification.onClose(): %s [%s]', notification.title, notification.type);
                            }
                        });
                    };

                    function getRandomInt(min, max)
                    {
                        return Math.floor(Math.random() * (max - min + 1)) + min;
                    }                    

                    function getRandomIcon(allowNull)
                    {
                        var icons = [null, 'fa-bell', 'fa-envelope', 'fa-comments', 'fa-clock-o', 'fa-thumbs-up'],
                            icon = icons[getRandomInt(0, (icons.length - 1))];

                        if (!icon && allowNull === false)
                            icon = icons[1];

                        return 'fa fa-fw ' + icon;
                    }
                }
            ]);

            var services = angular.module('DemoApp.services', []);
            services.factory('InterfaceService', [
                'AlertsService', 'MessageBoxService', 'NotificationsService',
                function(AlertsService, MessageBoxService, NotificationsService)
                {
                    return {
                        showAlert: AlertsService.showAlert,
                        showMessageBox: MessageBoxService.showMessageBox,
                        showNotification: NotificationsService.showNotification
                    };
                }
            ]);
        })(angular);
    </script>
</head>
<body>
    <div class="container" ng-controller="MainCtrl">
        <h2>Demo</h2>
        <div class="row">
            <div class="col-md-12">
                <input type="number" ng-model="timeout" />
                <br /><br />
                <button class="btn btn-info" style="width: 150px;" role="button" ng-click="showAlert()">
                    Alert
                </button>
                <br /><br />
                <button class="btn btn-warning" style="width: 150px;" role="button" ng-click="showMessageBox()">
                    Message Box
                </button>
                <br /><br />
                <button class="btn btn-danger" style="width: 150px;" role="button" ng-click="showNotification()">
                    Notification
                </button>
            </div>
        </div>
    </div>
    <!-- Alerts -->
    <div data-wh-alerts></div>
    <!-- MessageBox -->
    <div data-wh-message-box></div>
    <!-- Notifications -->
    <div data-wh-notifications></div>
</body>
</html>